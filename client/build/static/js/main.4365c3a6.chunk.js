(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,t,n){e.exports=n(36)},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(9),c=n.n(r),i=(n(25),n(4)),l=n(5),s=n(7),u=n(6),d=(n(26),n(27),n(2)),h=n(1),m=n.n(h),f=n(10),p=n(11),g=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).onClick=function(t){var n=e.refs.canvas,a=n.getContext("2d");switch(t.target.name){case"clear":a.clearRect(0,0,n.width,n.height);break;case"color":a.strokeStyle=t.target.id;break;case"size":a.lineWidth=t.target.value;break;case"save":var o={src:n.toDataURL()};e.props.postPicture(o,e.props.data.token)}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.refs.canvas;e.width=Math.floor(window.innerWidth/2),e.height=Math.floor(window.innerHeight/2);var t=e.getContext("2d"),n={x:void 0,y:void 0,down:!1};window.addEventListener("resize",(function(){e.width=Math.floor(window.innerWidth/2),e.height=Math.floor(window.innerHeight/2)})),window.addEventListener("mousedown",(function(e){n.down=!0,n.x=e.offsetX,n.y=e.offsetY})),window.addEventListener("mousemove",(function(e){if(n.down){if(e.x<=Math.floor(window.innerWidth/4)-10)return void(n.down=!1);if(e.y>=Math.floor(window.innerHeight/2)+10+20||e.y<=20)return void(n.down=!1);a=n.x,o=n.y,r=e.offsetX,c=e.offsetY,t.beginPath(),t.moveTo(a,o),t.lineTo(r,c),t.stroke(),n.x=e.offsetX,n.y=e.offsetY}var a,o,r,c})),window.addEventListener("mouseup",(function(){n.down=!1})),window.addEventListener("mouseout",(function(){n.down=!1}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"drawingApp"},o.a.createElement("div",{className:"canvasContainer"},o.a.createElement("canvas",{ref:"canvas"})),o.a.createElement("div",{className:"tools"},o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{onClick:this.onClick,name:"color",id:"black",style:{backgroundColor:"black"}}),o.a.createElement("button",{onClick:this.onClick,name:"color",id:"gray",style:{backgroundColor:"gray"}}),o.a.createElement("button",{onClick:this.onClick,name:"color",id:"red",style:{backgroundColor:"red"}}),o.a.createElement("button",{onClick:this.onClick,name:"color",id:"orange",style:{backgroundColor:"orange"}}),o.a.createElement("button",{onClick:this.onClick,name:"color",id:"yellow",style:{backgroundColor:"yellow"}}),o.a.createElement("button",{onClick:this.onClick,name:"color",id:"green",style:{backgroundColor:"green"}}),o.a.createElement("button",{onClick:this.onClick,name:"color",id:"blue",style:{backgroundColor:"blue"}}),o.a.createElement("button",{onClick:this.onClick,name:"color",id:"purple",style:{backgroundColor:"purple"}}),o.a.createElement("button",{onClick:this.onClick,name:"color",id:"white",className:"icons btn-erase"},o.a.createElement(f.a,{icon:p.a,size:"lg"})," Eraser"),o.a.createElement("button",{onClick:this.onClick,name:"clear",className:"icons btn-clear"},o.a.createElement(f.a,{icon:p.c,size:"lg"})," Clear"),o.a.createElement("button",{onClick:this.onClick,name:"save",className:"icons btn-save"},o.a.createElement(f.a,{icon:p.b,size:"lg"})," Save")),o.a.createElement("div",null,o.a.createElement("label",null,"Size: "),o.a.createElement("input",{type:"range",name:"size",min:"1",max:"5",defaultValue:"1",step:"1",onChange:this.onClick,className:"slider"}))),o.a.createElement("div",{className:"instructions"},o.a.createElement("h2",null,"How to use:"),o.a.createElement("ul",null,o.a.createElement("li",null,"Use your mouse and hold down left click in the canvas to start drawing."),o.a.createElement("li",null,"You can change the line color and size using the buttons."),o.a.createElement("li",null,"To display your drawing in the gallery, click on save when you are done drawing."))))}}]),n}(o.a.Component);g.protoTypes={data:m.a.object.isRequired,postPicture:m.a.func.isRequired};var v=Object(d.b)((function(e){return{data:e.authReducer}}),{postPicture:function(e,t){return function(n){var a={headers:{"Content-Type":"application/json"}};t&&(a.headers["x-auth-token"]=t,console.log(a)),fetch("/api/pictures",{method:"POST",headers:{"Content-Type":"application/json","x-auth-token":t},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return n({type:"POST_PICTURE",data:e})})).catch((function(e){return console.log(e)}))}}})(g),E=(n(35),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.getPictures()}},{key:"componentDidUpdate",value:function(e){this.props.data.pictures!==e.data.pictures&&this.props.getPictures()}},{key:"render",value:function(){var e=this.props.data.pictures.map((function(e){return o.a.createElement("div",{key:e[0]},o.a.createElement("img",{src:e[0],alt:""}),o.a.createElement("h6",null,e[1]))}));return o.a.createElement("div",null,o.a.createElement("h1",null,"Gallery"),o.a.createElement("div",{className:"grid-container"},e))}}]),n}(o.a.Component));E.protoTypes={data:m.a.object.isRequired,getPictures:m.a.func.isRequired};var b=Object(d.b)((function(e){return{data:e.pictureReducer}}),{getPictures:function(){return function(e){fetch("/api/pictures",{method:"GET"}).then((function(e){return e.json()})).then((function(t){return e({type:"GET_PICTURES",data:t})})).catch((function(e){return console.log(e)}))}}})(E),k=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){console.log("Mounted, trying to get token"),this.props.getToken()}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(v,null),o.a.createElement(b,null))}}]),n}(o.a.Component),w=Object(d.b)("",{getToken:function(){return function(e){fetch("/api/user",{method:"GET"}).then((function(e){return e.json()})).then((function(t){return e({type:"GET_TOKEN",data:t})})).catch((function(t){var n,a;e((n=t.res.data,a=t.res.status,{type:"GET_ERROR",data:{msg:n,status:a}})),e({type:"AUTH_FAIL"})}))}}})(k);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var y=n(3),C=n(16),O={pictures:[]},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PICTURES":return{pictures:Object(C.a)(t.data.map((function(e){return[e.src,e.date.substr(0,10)]})))};case"POST_PICTURE":return{pictures:[].concat(Object(C.a)(e.pictures),[t.data])};default:return e}},j={token:null,isAuth:null},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOKEN":return{token:t.data.token,isAuth:!0};case"AUTH_FAIL":return j;default:return e}},P={msg:{},status:null},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERROR":return console.log(t.data.msg,t.data.status),{msg:t.data.msg,status:t.data.status};case"CLEAR_ERROR":return P;default:return e}},x=Object(y.c)({pictureReducer:T,authReducer:R,errorReducer:N}),_=n(19),A=Object(y.d)(x,Object(y.a)(_.a));c.a.render(o.a.createElement(d.a,{store:A},o.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.4365c3a6.chunk.js.map